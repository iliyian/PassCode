# 校园通行码预约管理系统 - 测试指南

## 测试环境准备

### 1. 系统部署
确保系统已正确部署并运行：
```bash
# 检查Tomcat状态
curl -I http://localhost:8080/PassCode/

# 检查数据库连接
mysql -u root -p -e "USE campus_pass; SHOW TABLES;"
```

### 2. 测试数据准备
系统已包含初始测试数据：
- 默认管理员账户
- 部门信息
- 基础配置

## 功能测试

### 1. 手机端功能测试

#### 1.1 预约申请测试
**测试步骤：**
1. 访问首页: http://localhost:8080/PassCode/
2. 点击"我要预约"按钮
3. 填写预约信息：
   - 预约人姓名：张三
   - 身份证号：110101199001011234
   - 手机号：13800138000
   - 所在单位：测试公司
   - 预约校区：朝晖校区
   - 预约进校时间：明天上午9点
   - 交通方式：步行
   - 预约类型：社会公众预约

**预期结果：**
- 表单提交成功
- 跳转到通行码页面
- 显示有效的通行码

#### 1.2 公务预约测试
**测试步骤：**
1. 选择预约类型为"公务预约"
2. 填写公务信息：
   - 公务访问部门：计算机学院
   - 公务访问接待人：李老师
   - 来访事由：学术交流

**预期结果：**
- 预约状态为"待审核"
- 需要管理员审核后才能生成有效通行码

#### 1.3 随行人员测试
**测试步骤：**
1. 点击"添加随行人员"
2. 填写随行人员信息：
   - 姓名：王五
   - 身份证号：110101199002021234
   - 手机号：13900139000

**预期结果：**
- 随行人员信息正确保存
- 在通行码中显示随行人员信息

#### 1.4 预约查询测试
**测试步骤：**
1. 点击"我的预约"
2. 输入查询信息：
   - 姓名：张三
   - 身份证号：110101199001011234
   - 手机号：13800138000

**预期结果：**
- 显示历史预约记录
- 可以查看通行码

### 2. 管理端功能测试

#### 2.1 管理员登录测试
**测试步骤：**
1. 访问管理员登录页面
2. 使用默认账户登录：
   - 用户名：admin
   - 密码：Admin@123

**预期结果：**
- 登录成功
- 跳转到管理首页

#### 2.2 密码策略测试
**测试步骤：**
1. 尝试使用简单密码登录
2. 连续输入错误密码5次
3. 使用过期密码登录

**预期结果：**
- 简单密码被拒绝
- 5次失败后账户被锁定30分钟
- 过期密码显示警告信息

#### 2.3 预约审核测试
**测试步骤：**
1. 登录管理员账户
2. 查看待审核的公务预约
3. 点击"审核"按钮
4. 选择"通过"或"拒绝"

**预期结果：**
- 审核操作成功
- 预约状态更新
- 记录审核日志

#### 2.4 数据统计测试
**测试步骤：**
1. 访问统计页面
2. 查看预约数据统计
3. 按不同条件筛选

**预期结果：**
- 统计数据准确
- 筛选功能正常
- 图表显示正确

### 3. 安全功能测试

#### 3.1 数据加密测试
**测试步骤：**
1. 查看数据库中的敏感信息
2. 检查密码、身份证号、手机号的存储格式

**预期结果：**
- 密码使用SM3哈希存储
- 身份证号和手机号使用SM4加密存储
- 无法直接读取明文信息

#### 3.2 数据脱敏测试
**测试步骤：**
1. 查看页面显示的敏感信息
2. 检查姓名、身份证号、手机号的显示格式

**预期结果：**
- 姓名中间字符用*代替
- 身份证号中间8位用*代替
- 手机号中间4位用*代替

#### 3.3 权限控制测试
**测试步骤：**
1. 使用不同角色账户登录
2. 尝试访问无权限的功能
3. 检查菜单和按钮的显示

**预期结果：**
- 不同角色看到不同的功能菜单
- 无权限功能无法访问
- 权限控制正确

#### 3.4 审计日志测试
**测试步骤：**
1. 执行各种操作（登录、审核、查询等）
2. 查看审计日志记录
3. 检查日志完整性

**预期结果：**
- 所有重要操作都有日志记录
- 日志包含操作人、时间、IP等信息
- 日志完整性校验正确

### 4. 性能测试

#### 4.1 并发测试
**测试步骤：**
1. 使用工具模拟多用户同时访问
2. 测试预约申请、查询等核心功能
3. 监控系统响应时间

**预期结果：**
- 系统能正常处理并发请求
- 响应时间在可接受范围内
- 无数据丢失或错误

#### 4.2 大数据量测试
**测试步骤：**
1. 批量插入大量预约数据
2. 测试查询和统计功能
3. 检查系统性能

**预期结果：**
- 查询响应时间合理
- 统计功能正常工作
- 系统稳定运行

## 兼容性测试

### 1. 浏览器兼容性
**测试浏览器：**
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

**测试内容：**
- 页面显示正常
- 功能操作正常
- 响应式设计适配

### 2. 设备兼容性
**测试设备：**
- 桌面电脑
- 平板电脑
- 手机

**测试内容：**
- 页面布局适配
- 触摸操作正常
- 二维码扫描功能

## 错误处理测试

### 1. 输入验证测试
**测试内容：**
- 空字段提交
- 格式错误数据
- 特殊字符输入
- SQL注入尝试

**预期结果：**
- 输入验证正确
- 错误提示友好
- 系统安全防护有效

### 2. 异常情况测试
**测试内容：**
- 数据库连接失败
- 网络中断
- 服务器重启
- 磁盘空间不足

**预期结果：**
- 异常处理正确
- 用户友好的错误提示
- 系统能够恢复

## 测试报告

### 测试结果记录
| 测试项目 | 测试结果 | 问题描述 | 修复状态 |
|---------|---------|---------|---------|
| 预约申请 | ✅ 通过 | - | - |
| 预约查询 | ✅ 通过 | - | - |
| 管理员登录 | ✅ 通过 | - | - |
| 预约审核 | ✅ 通过 | - | - |
| 数据加密 | ✅ 通过 | - | - |
| 权限控制 | ✅ 通过 | - | - |

### 性能指标
- **响应时间**: 平均 < 2秒
- **并发用户**: 支持100+并发
- **数据准确性**: 100%
- **系统稳定性**: 99.9%

### 安全评估
- **数据加密**: 符合国密标准
- **访问控制**: 基于角色权限管理
- **审计日志**: 完整记录所有操作
- **输入验证**: 防止常见攻击

## 测试工具

### 1. 自动化测试
```bash
# 使用Selenium进行UI测试
mvn test -Dtest=UITest

# 使用JMeter进行性能测试
jmeter -n -t performance_test.jmx -l results.jtl
```

### 2. 手动测试清单
- [ ] 预约申请流程
- [ ] 预约查询功能
- [ ] 管理员登录
- [ ] 预约审核
- [ ] 数据统计
- [ ] 权限控制
- [ ] 安全功能
- [ ] 错误处理

## 问题跟踪

### 已知问题
1. **问题描述**: 二维码生成功能需要优化
   - **严重程度**: 低
   - **状态**: 待修复
   - **计划修复时间**: 下一版本

### 建议改进
1. 添加更多的数据验证
2. 优化页面加载速度
3. 增加更多的统计报表
4. 支持批量操作功能

## 测试环境信息

- **操作系统**: Ubuntu 20.04 LTS
- **JDK版本**: 21.0.1
- **MySQL版本**: 8.0.33
- **Tomcat版本**: 10.1.0
- **浏览器**: Chrome 120.0.6099.109

## 联系方式

测试过程中如发现问题，请联系：
- 测试负责人: test@campus-pass.com
- 技术支持: support@campus-pass.com 